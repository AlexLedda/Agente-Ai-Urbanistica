option_settings:
  aws:elasticbeanstalk:application:environment:
    PYTHONUNBUFFERED: "1"
    # Add your API keys here or set them via EB console
    # OPENAI_API_KEY: "your-key-here"
    # ANTHROPIC_API_KEY: "your-key-here"
    # GOOGLE_API_KEY: "your-key-here"
  
  aws:elasticbeanstalk:environment:
    EnvironmentType: LoadBalanced
    LoadBalancerType: application
  
  aws:elasticbeanstalk:environment:proxy:
    ProxyServer: none
  
  aws:autoscaling:launchconfiguration:
    InstanceType: t3.small
    IamInstanceProfile: aws-elasticbeanstalk-ec2-role
  
  aws:elasticbeanstalk:healthreporting:system:
    SystemType: enhanced
  
  aws:elasticbeanstalk:cloudwatch:logs:
    StreamLogs: true
    DeleteOnTerminate: false
    RetentionInDays: 7

commands:
  01_create_data_dir:
    command: "mkdir -p /var/app/data /var/app/logs"
  02_set_permissions:
    command: "chmod -R 777 /var/app/data /var/app/logs"
